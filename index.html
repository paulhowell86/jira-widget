<!DOCTYPE html>
<html>
<head>
  <title>Jira Service Desk Widget</title>
  <style>
    body { margin: 0; padding: 0; overflow: hidden; }
    html, body { height: 100%; width: 100%; }

    /* Hide the default "Contact Us" button */
    iframe[data-testid="embedded-widget-frame"] {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- Jira Service Desk Widget -->
  <script
    data-jsd-embedded
    data-key="f0dececa-a4a9-4b70-81fd-92d8432f40d7"
    data-base-url="https://jsd-widget.atlassian.com"
    src="https://jsd-widget.atlassian.com/assets/embed.js">
  </script>

  <script>
    // Retry mechanism to open Jira widget and keep it open
    let checkInterval = null;
    let attempts = 0;
    const maxAttempts = 40; // ~10 seconds at 250ms intervals

    function openAndLockWidget() {
      if (typeof JiraServiceDesk !== 'undefined' && typeof JiraServiceDesk.open === 'function') {
        JiraServiceDesk.open(); // Open widget
        clearInterval(checkInterval);
        console.log("✅ Jira widget opened and set to remain expanded.");
      } else {
        attempts++;
        if (attempts >= maxAttempts) {
          clearInterval(checkInterval);
          console.warn("⚠ Jira widget did not auto-open after multiple attempts.");
        }
      }
    }

    // Start checking every 250ms until widget is ready
    checkInterval = setInterval(openAndLockWidget, 250);
  </script>
</body>
</html>
